(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1008:function(e,t,a){"use strict";a.d(t,"a",function(){return u}),a.d(t,"b",function(){return d});var n=a(0),o=a.n(n),r=a(15),i=a(10),c=a(222),s=a(105),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var u,m=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]])}return a};!function(e){e.StaticRoute="StaticRoute",e.DynamicRoute="DynamicRoute"}(u||(u={}));var d=function(e){var t=e.routeType;return function(e){var a=function(a){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n["Component"]),l(r,[{key:"componentDidUpdate",value:function(){t===u.DynamicRoute?this.props.dynamicRouteComponentUpdated({}):this.props.staticRouteComponentUpdated({})}},{key:"render",value:function(){var t=this.props,a=(t.dynamicRouteComponentUpdated,t.staticRouteComponentUpdated,m(t,["dynamicRouteComponentUpdated","staticRouteComponentUpdated"]));return o.a.createElement(e,Object.assign({},a))}}]),r}();a.displayName="TrackRouteUpdates("+Object(s.a)(e)+")";var d=Object(c.b)()({dynamicRouteComponentUpdated:i.a.DynamicRouteComponentUpdated,staticRouteComponentUpdated:i.a.StaticRouteComponentUpdated});return Object(r.connect)(function(){return{}},d)(a)}}},1011:function(e,t,a){e.exports={gutter:"8px",tagsContainer:"_2_OE1",tagItem:"_3Z-ua"}},1013:function(e,t,a){e.exports={smallTag:"_6PxCM"}},1014:function(e,t,a){"use strict";var n=a(251),o=a.n(n),r=a(0),i=a.n(r),c=a(8),s=a.n(c),l=a(15),u=a(1449),m=a(10),d=a(152),p=a(1013),h=a.n(p),f=function(e){var t=e.tag,a=e.emplacement,n=e.trackSearchSuggestionClick,o=e.className;return i.a.createElement(u.a,{className:s()(h.a.smallTag,o),to:Object(d.b)(t.title),title:t.title+" images",onClick:function(){return n(t.title.toLowerCase(),a)}},t.title)};f.displayName="SmallTag";var b={trackSearchSuggestionClick:m.ib},g=Object(l.connect)(function(){return{}},b)(f),v=a(1011),y=a.n(v),O=function(e){var t=e.tags,a=e.emplacement,n=e.takeN;return i.a.createElement("div",{className:y.a.tagsContainer},(n?o()(t,n):t).map(function(e){return i.a.createElement("div",{key:e.title,className:y.a.tagItem},i.a.createElement(g,{tag:e,emplacement:a}))}))};O.displayName="SmallTagsList";var _=O;a.d(t,"a",function(){return _})},1016:function(e,t,a){e.exports={colorWhite:"#fff",colorLightGrey:"#ddd",colorGrey:"#999",colorDarkGrey:"#777",colorBlue:"#007fff",colorDarkBlue:"#006aff",colorBlack:"#000",followButton:"_3nDcb",isFollowing:"_2br-F",followIcon:"_2BKrY"}},1031:function(e,t,a){e.exports={"--sm":"(--sm)","--md-min":"(--md-min)",colorGrey:"#999",colorDarkWhite:"#f5f5f5",colorLightBlack:"#111",headingXs:"_2uOAz",fontWeightSemibold:"_13Ib2",truncate:"_1ByhS",textDecorationNone:"_1CBrG",maxWidth:"750px",smallImagePercentage:"30%",bigImagePercentage:"70%",aspectRatioWrapper:"_2Dp1M",collectionContainer:"_28_Yu",linkWrapper:"fM0CB _1CBrG",imagesContainer:"_2zwgf",smallImagesContainer:"_2gO6E",image:"Kh8bw",bigImageWrapper:"_2vGrb",smallImageWrapper:"mTW0H",titleContainer:"_3zVYZ _1ByhS",iconPrivate:"_39uDR",title:"_2LKkn _2uOAz _13Ib2 _1ByhS",description:"_3-HBj _1ByhS"}},1034:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e){return function(t){return e.username===t.username}}},1039:function(e,t,a){"use strict";var n=a(8),o=a.n(n),r=a(4),i=a.n(r),c=a(151),s=a.n(c),l=a(0),u=a.n(l),m=a(15),d=a(1474),p=a(1460),h=a(1466),f=a(10),b=a(34),g=a(14),v=a(12),y=a(17),O=a(25),_=a(18),E=Object(_.a)("M31.2 12.8h-2.4v-2.4c0-.4-.4-.8-.8-.8h-1.6c-.4 0-.8.4-.8.8v2.4h-2.4c-.4 0-.8.4-.8.8v1.6c0 .4.4.8.8.8h2.4v2.4c0 .4.4.8.8.8h1.6c.4 0 .8-.4.8-.8v-2.4h2.4c.4 0 .8-.4.8-.8v-1.6c0-.4-.4-.8-.8-.8zm-15.2 5.1v-1.2c1.9-1.1 3.2-3.1 3.2-5.5v-1.6c0-3.5-2.9-6.4-6.4-6.4s-6.4 2.9-6.4 6.4v1.6c0 2.4 1.3 4.4 3.2 5.5v1.2c-5.5.9-9.6 4-9.6 7.7v1.6c0 .9.7 1.6 1.6 1.6h22.4c.9 0 1.6-.7 1.6-1.6v-1.6c0-3.7-4.1-6.8-9.6-7.7z"),I=a(28),w=a(33),R=a(1016),S=a.n(R),j=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var T=Object(v.a)()({labelText:{isFollowing:"Following",isNotFollowing:"Follow"}}),N=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["Component"]),j(t,[{key:"componentWillUnmount",value:function(){this.followSubscription&&this.followSubscription.unsubscribe()}},{key:"getLabelText",value:function(){var e=this.props.labelText;return this.props.selectedUser.followed_by_user?e.isFollowing:e.isNotFollowing}},{key:"buildToLink",value:function(){var e=this.props,t=e.authUser,a=e.location,n=Object(g.g)(a),o=t?n:Object.assign({},n,{login_view:"is_visible",login_action:"follow"});return{pathname:a.pathname,search:Object(y.c)(o),state:a.state}}},{key:"buildClickHandler",value:function(){var e=this,t=this.props,a=t.authUser,n=t.selectedUser,o=t.followUser,r=t.unfollowUser,i=t.trackFollowButtonClick,c=t.trackUnfollowButtonClick,s=t.buttonType;if(!a)return function(){return i(n.id,s)};var l=n.username,u=n.followed_by_user,m=(u?b.a.users.unfollowUser:b.a.users.followUser)({username:l}).pipe(Object(p.a)(3),Object(h.a)(1));return function(t){t.stopPropagation(),u?(r(n.id),c(n.id,s)):(o(n.id),i(n.id,s)),e.followSubscription=m.subscribe()}}},{key:"renderContainer",value:function(e){var t=this.props,a=t.selectedUser,n=t.className,r=t.redirectAfterFollow,i=t.authUser,c=this.buildClickHandler(),s=a.followed_by_user,l=r||!i,m={className:o()(S.a.followButton,s&&S.a.isFollowing,n),buttonSize:"small"};return l?u.a.createElement(w.a,Object.assign({tag:"link",to:this.buildToLink(),onMouseUp:c},m),e):u.a.createElement(w.a,Object.assign({tag:"button",onMouseUp:c},m),e)}},{key:"render",value:function(){var e=this.props,t=e.selectedUser,a=e.authUser;return s()(a,"username")===t.username?u.a.createElement("div",null):this.renderContainer(u.a.createElement("span",null,u.a.createElement(E,{className:S.a.followIcon}),this.getLabelText()))}}]),t}();N.displayName="FollowButton";Object(O.a)(T)(N);var D={trackFollowButtonClick:f.Z,trackUnfollowButtonClick:f.kb,followUser:f.q,unfollowUser:f.nb},C=i()(Object(m.connect)(function(e){return{authUser:Object(I.c)(e)}},D),d.a,Object(O.a)(T))(N);a.d(t,"a",function(){return C})},1045:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return o});var n=600,o=500},1047:function(e,t,a){"use strict";var n,o=a(3),r=a(4),i=a.n(r),c=a(0),s=a.n(c),l=a(15),u=a(1449),m=a(407),d=a(16),p=a(179),h=a(86),f=a(12),b=a(25),g=a(253),v=a(28),y=a(415),O=a(1014),_=a(416),E=a(408),I=a(409),w=a(46),R=a(1031),S=a.n(R),j=Object(E.g)(Object(E.c)({styles:S.a,className:"maxWidth",fallback:"200"}));!function(e){e.full="full",e.half="half"}(n||(n={}));var T=function(e){return e.urls.raw},N=function(e){return function(t){return{src:Object(w.d)(t)({w:j}),srcSet:Object(I.b)({baseUrl:t,width:j*function(e){switch(e){case n.full:return Object(E.f)(Object(E.c)({styles:S.a,className:"bigImagePercentage",fallback:"50%"}));case n.half:return Object(E.f)(Object(E.c)({styles:S.a,className:"smallImagePercentage",fallback:"50%"}))}}(e),getParams:o.a.none()})}}},D=function(e,t,a){return e.chain(function(e){return Object(f.c)(t,e)}).map(T).map(N(a))},C=Object(f.a)()({showUserInfo:!0}),P=function(e){var t=e.collection,a=e.isLoggedIn,r=e.showUserInfo,i=t.user,c=t.total_photos,l=t.preview_photos,f=t.private,b=t.tags,v=Object(d.a)(t),E=Object(p.c)(t),I=o.a.of(l),w=D(I,0,n.full),R=D(I,1,n.half),j=D(I,2,n.half),T=r?s.a.createElement("span",null," ","· Curated by"," ",a?s.a.createElement(u.a,{to:Object(h.c)(i)},i.name):i.name):null;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:S.a.aspectRatioWrapper},s.a.createElement("div",{className:S.a.collectionContainer},s.a.createElement(u.a,{to:{pathname:E},className:S.a.linkWrapper},s.a.createElement("div",{className:S.a.imagesContainer},w.map(function(e){var t=e.src,a=e.srcSet;return s.a.createElement(y.a,{role:"presentation",containerClassName:S.a.bigImageWrapper,className:S.a.image,src:t,srcSet:a})}).getOrElse(s.a.createElement("div",{className:S.a.bigImageWrapper})),s.a.createElement("div",{className:S.a.smallImagesContainer},R.map(function(e){var t=e.src,a=e.srcSet;return s.a.createElement(y.a,{role:"presentation",containerClassName:S.a.smallImageWrapper,className:S.a.image,src:t,srcSet:a})}).getOrElse(s.a.createElement("div",{className:S.a.smallImageWrapper})),j.map(function(e){var t=e.src,a=e.srcSet;return s.a.createElement(y.a,{role:"presentation",containerClassName:S.a.smallImageWrapper,className:S.a.image,src:t,srcSet:a})}).getOrElse(s.a.createElement("div",{className:S.a.smallImageWrapper})))),s.a.createElement("div",{className:S.a.titleContainer},f&&s.a.createElement("span",{className:S.a.isPrivateContainer},s.a.createElement(_.a,{className:S.a.isPrivateTooltip,label:"This collection is private. To share, copy the URL or make the collection public.",width:200},s.a.createElement(g.a,{className:S.a.iconPrivate}))),s.a.createElement("div",{className:S.a.title},v))),s.a.createElement("div",{className:S.a.description},c," photos",T))),s.a.createElement(O.a,{tags:b,takeN:3,emplacement:m.a.CollectionCard}))};P.displayName="CollectionCard";var x=i()(Object(l.connect)(function(e,t){return{isLoggedIn:Object(v.g)(e)}}),Object(b.a)(C))(P);a.d(t,"a",function(){return x})},1053:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"d",function(){return r}),a.d(t,"a",function(){return i});var n=4,o=12,r=30,i=30},1057:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(1047),i=a(1063),c=a.n(i),s=function(e){var t=e.collection;return o.a.createElement("div",{className:c.a.collectionContainer,"data-test":"collection-feed-card"},t?o.a.createElement(r.a,{collection:t}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:c.a.placeholderAspectRatioWrapper},o.a.createElement("div",{className:c.a.placeholderContainer},o.a.createElement("div",{className:c.a.placeholder}),o.a.createElement("div",{className:c.a.placeholderTextBox}),o.a.createElement("div",{className:c.a.placeholderTextBox2}))),o.a.createElement("div",{className:c.a.placeholderTextBox3})))};s.displayName="CollectionFeedCard";var l=s;a.d(t,"a",function(){return l})},1059:function(e,t,a){"use strict";t.__esModule=!0;var n,o=a(581),r=(n=o)&&n.__esModule?n:{default:n};t.default=r.default},1060:function(e,t,a){"use strict";t.__esModule=!0;var n=a(0);o(a(413)),o(a(412));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(t){var a=(0,n.createFactory)(t);return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.shouldComponentUpdate=function(t){return e(this.props,t)},n.prototype.render=function(){return a(this.props)},n}(n.Component)}}},1061:function(e,t,a){"use strict";t.__esModule=!0;var n=r(a(1060)),o=r(a(1059));r(a(413)),r(a(412));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return(0,n.default)(function(e,t){return!(0,o.default)(e,t)})(e)}},1063:function(e,t,a){e.exports={"--sm":"(--sm)","--sm-min":"(--sm-min)","--md-min":"(--md-min)",colorLightGrey:"#ddd",placeholderBackground:"_2VWD4",gutter:"12px",oneHundrendPercent:"100%",fiftyPercent:"50%",collectionContainer:"_15M91",placeholderAspectRatioWrapper:"_2rCoL",placeholderContainer:"_3jSxL",placeholder:"_1X2ch _2VWD4",placeholderTextBox:"_3I0Nd _2VWD4",placeholderTextBox2:"mpqhr _2VWD4",placeholderTextBox3:"yxc4t _2VWD4",placeholderTextBox1:"_2pqeA _2VWD4"}},1068:function(e,t,a){"use strict";var n=a(8),o=a.n(n),r=a(251),i=a.n(r),c=a(0),s=a.n(c),l=a(1053),u=a(407),m=a(12),d=a(25),p=a(1014),h=a(1090),f=a.n(h),b=Object(m.a)()({keywords:[],headingCopy:"Related searches",showHeading:!1,hideOnMobile:!1,maximumResultsCount:l.b}),g=function(e){var t=e.showHeading,a=e.keywords,n=e.hideOnMobile,r=e.headingCopy,c=e.maximumResultsCount,l=i()(a,c);return 0===l.length?s.a.createElement("div",null):s.a.createElement("div",{className:o()(f.a.container,n&&f.a.hideOnMobile)},t&&s.a.createElement("p",{className:f.a.heading},r),s.a.createElement(p.a,{tags:l,emplacement:u.a.Related}))};g.displayName="RelatedTags";var v=Object(d.a)(b)(g);a.d(t,"a",function(){return v})},1090:function(e,t,a){e.exports={"--sm-min":"(--sm-min)",containerLayout:"PrOBO",containerPadding:"_1CR66",fontWeightNormal:"_27Bp2",container:"_3w_cF PrOBO _1CR66",heading:"_2azK- _27Bp2",hideOnMobile:"_1Co2N"}},1098:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(15),i=a(12),c=a(25),s=a(255),l=a(1057),u=a(1144),m=a.n(u),d=Object(i.a)()({relatedCollectionIds:[]}),p=function(e){var t=e.relatedCollections,a=e.heading;return 0===t.length?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:m.a.clearfix},o.a.createElement("p",{className:m.a.heading},a)),o.a.createElement("div",{className:m.a.flexFeed},t.map(function(e,t){return o.a.createElement(l.a,{key:t,collection:e})})))};p.displayName="RelatedCollections";var h=Object(c.a)(d)(Object(r.connect)(function(e,t){return{relatedCollections:Object(s.c)(e,t.relatedCollectionIds)}})(p));a.d(t,"a",function(){return h})},1100:function(e,t,a){"use strict";var n=a(184),o=a.n(n),r=a(8),i=a.n(r),c=a(0),s=a.n(c),l=a(268),u=a(262),m=a(267),d=a(261),p=a(205),h=a(431),f=a(1140),b=a.n(f),g=function(e){return s.a.createElement(p.b,Object.assign({},e,{className:b.a.shareLink,buttonType:"outline"}),(t={buttonShareType:e.type},a=t.buttonShareType,p.a.match({email:function(){return s.a.createElement(l.a,{className:b.a.emailShareLinkIcon})},facebook:function(){return s.a.createElement(u.a,{className:b.a.facebookShareLinkIcon})},twitter:function(){return s.a.createElement(d.a,{className:b.a.twitterShareLinkIcon})},pinterest:function(){return s.a.createElement(m.a,{className:b.a.pinterestShareLinkIcon})}})(a)),s.a.createElement("span",{className:b.a.shareLinkText},o()(e.type.tag)));var t,a},v=function(e){var t=e.title,a=e.buttonsShareProps,n=e.link;return s.a.createElement("div",null,s.a.createElement("div",{className:b.a.container},s.a.createElement("div",{className:b.a.cell},s.a.createElement("h2",{className:b.a.title},"Share"),s.a.createElement("span",{className:b.a.subtitle},t)),s.a.createElement("div",{className:i()(b.a.halfCell,b.a.shareLinks)},a.map(function(e){return s.a.createElement("div",{key:e.type.tag,className:i()(b.a.halfCell,b.a.shareLinkContainer)},g(e))})),s.a.createElement("div",{className:b.a.cell},s.a.createElement(h.a,{buttonText:"Copy link"},n))))};v.displayName="ShareModalContent";var y=v;a.d(t,"a",function(){return y})},1106:function(e,t,a){"use strict";var n=a(8),o=a.n(n),r=a(3),i=a(0),c=a.n(i),s=a(405),l=a(18),u=Object(l.a)("M0 26c0 1.7.2 3.3.6 4.9.2.9.7.9 1 0 2.1-5.3 5.5-10.3 11.1-11.3h3.3v4.4c0 2 1.2 2.6 2.6 1.4l12.8-11c.7-.6.7-1.6 0-2.3l-12.8-11c-1.4-1.3-2.6-.6-2.6 1.3v4.7c-9.6 1.6-16 9.4-16 18.9z"),m=a(33),d=a(1142),p=a.n(d),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.getInitialState(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),h(t,[{key:"getInitialState",value:function(){var e=this,t=this.props.renderType;return{maybeShareFunction:s.a.match({Enhanced:function(){return r.a.some(window)},Unenhanced:function(){return r.a.none()}})(t).chain(function(e){return void 0!==e.navigator.share?r.a.some(function(t){return e.navigator.share(t)}):r.a.none()}).map(function(t){var a=e.props.shareOptions;return function(){return t(a)}})}}},{key:"renderContent",value:function(){return c.a.createElement("div",{className:p.a.flexContainer},c.a.createElement(u,{className:p.a.icon}),c.a.createElement("span",{className:p.a.text},"Share"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.shareLocationDescriptor,n=t.className,r=this.state.maybeShareFunction,i={className:o()(p.a.flexContainer,n),buttonType:"outline",buttonSize:"small"};return r.map(function(t){return c.a.createElement(m.a,Object.assign({tag:"button",onClick:t},i),e.renderContent())}).getOrElseL(function(){return c.a.createElement(m.a,Object.assign({tag:"link",to:a},i),e.renderContent())})}}]),t}(),b=Object(s.b)(f);a.d(t,"a",function(){return b})},1113:function(e,t,a){e.exports={colorGrey:"#999",outerHorizontalGutter:"16px",innerHorizontalGutter:"8px",cellPadding:"calc(8px / 2)",container:"_307c3",actions:"_3-6v7",cell:"_2iWc-",buttonCell:"_27vvN _2iWc-",photographer:"HAAez _2iWc-",downloadButtonCell:"_13Q- _27vvN _2iWc-",downloadButton:"_1AA_u",secondaryLabel:"_2cSl3"}},1119:function(e,t,a){"use strict";var n=a(18);t.a=Object(n.a)("M16 0c-6.7 0-12 5.3-12 12 0 8.6 8.6 17.3 11.2 19.7.4.4 1.1.4 1.5 0 2.7-2.4 11.3-11.1 11.3-19.7 0-6.7-5.3-12-12-12zm0 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z")},1122:function(e,t,a){"use strict";var n;function o(e){var t=e.width,a=e.height;return a>t?n.portrait:a<t?n.landscape:n.square}function r(e){return o(e)===n.landscape}a.d(t,"a",function(){return r}),a.d(t,"b",function(){return i}),function(e){e.portrait="portrait",e.landscape="landscape",e.square="square"}(n||(n={}));var i=function(e){var t=o(e);return t===n.square||t===n.portrait}},1125:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(0),o=a.n(n),r=a(15),i=a(105),c=a(181),s=function(e){var t=function(t){return o.a.createElement(e,Object.assign({},t,{photos:t.photos}))};t.displayName="MapPhotoIdsToPhotos("+Object(i.a)(e)+")";return Object(r.connect)(function(){var e=Object(c.g)();return function(t,a){return{photos:e(t,a.photoIds)}}})(t)}},1140:function(e,t,a){e.exports={spacingUnit:"4px",fontWeightNormal:"_27Bp2",colorFacebook:"#3b5998",colorTwitter:"#1da1f2",colorPinterest:"#c92228",colorDarkGrey:"#777",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",cellPaddingUnitHalf:"4px",headerFontSize:"21px",smallFontSize:"12px",container:"_2VlB5",cell:"_1dPrd",halfCell:"_201D8",title:"_32uh- _27Bp2",subtitle:"_2B7-n",shareLinks:"_3E7sP",shareLinkContainer:"_1J04C",shareLink:"_2SPjs",shareLinkIcon:"_2U6YH",facebookShareLinkIcon:"_272Go _2U6YH",twitterShareLinkIcon:"_1tkzW _2U6YH",pinterestShareLinkIcon:"ZO3Vz _2U6YH",emailShareLinkIcon:"_2L646 _2U6YH",shareLinkText:"_1Wr08"}},1142:function(e,t,a){e.exports={spacingUnit:"4px",flexContainer:"_10F2J",icon:"_1xhtJ",text:"_3UPwX"}},1144:function(e,t,a){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutterContainer:"_2npM8",contentContainer:"_33G6- _2npM8",heading:"_2gjZV _33G6- _2npM8",flexFeed:"_3b8t6"}},1155:function(e,t,a){e.exports={resetBtn:"DWLeW",spacingUnit:"4px",centerItem:"_3mCZ_",isFixedMediaCondition:"(max-width: 767px)",isZoomableMediaCondition:"(min-width: 768px)",imagePlaceholder:"_2yFK-",imageContainer:"_1ac-D _3mCZ_",imageButton:"_1szcv DWLeW",overlay:"_2MKkb",imageButtonZoomedIn:"_2-OhB",imageButtonZoomedOut:"_1YS_6",overlayChild:"_1w7cG",zoomToggleIcon:"_1NYtf",isFixed:"pADQw",isZoomable:"_2QvSN"}},1218:function(e,t,a){e.exports={spacingUnit:"4px",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",container:"_1OFta",cell:"_1EBGx"}},1220:function(e,t,a){e.exports={colorGrey:"#999",fontWeightMedium:"xLon9",lineHeightTitle:"U8wGh",lineHeightCopy:"_13hUA",containerPaddingUnit:"16px",cellPaddingUnit:"8px",headerFontSize:"21px",smallFontSize:"12px",placeholderBackground:"_2VWD4",container:"_11so1",cell:"_3aBA9",col:"Rs1Ko",containerTitle:"_3dtte _11so1",containerFooter:"_2qSy1 _11so1",title:"_2dIZQ U8wGh",datePublished:"_1vScU",p:"_5UTXm",stats:"_19Kkj _11so1",stat:"_1H3Tk _3aBA9 Rs1Ko",statLabel:"_2FiKI",statLabelIcon:"_2nkiz",statLabelText:"B5nBa xLon9",statValue:"_2zoGD",statValueTotal:"_20G9q _13hUA",statValueDelta:"_3R4g7",metadataItemName:"_24YMC",hr:"_1CXhw",metadata:"_1Z2CJ _11so1",metadataItem:"_1XYV- _3aBA9 Rs1Ko",metadataItemValue:"_3Dok4",statValueTotalPlaceholder:"_19b04 _2VWD4",statValueDeltaPlaceholder:"_2rDWN _2VWD4"}},1222:function(e,t,a){e.exports={modalContent:"_29NeT"}},1224:function(e,t,a){e.exports={containerLayout:"PrOBO",wrapper:"WMwuA",container:"_1OYbO PrOBO",stickyHeaderContainer:"_33qjA",spinnerWrapper:"xn9xU"}},1226:function(e,t,a){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutterContainer:"_2npM8",contentContainer:"_1zDIT _2npM8",heading:"_1-q17 _2npM8 _27Bp2"}},1230:function(e,t,a){e.exports={smallFontSize:"12px",outerHorizontalGutter:"16px",innerHorizontalGutter:"8px",cellPadding:"calc(8px / 2)",spacingUnit:"4px",colorLightBlack:"#111",truncate:"_1ByhS",fontWeightMedium:"xLon9",resetBtn:"DWLeW",container:"_1ltEq",cell:"_3dxKb",halfCell:"_3kEvh",textContainer:"_2DxLe _3kEvh",textContainerNotTruncated:"gfzKD",textContainerTruncated:"OD7Kw",textContainerItem:"_28uSB _3kEvh",locationLink:"_2RL3a xLon9",locationIcon:"_15of1",locationTitle:"_20NLS _1ByhS",button:"_3JXJ6",buttonIcon:"_1rYbs",buttonText:"_1efgd",smallButton:"ldOpn"}},1232:function(e,t,a){e.exports={colorGrey:"#999",colorLightBlack:"#111",descriptionExpanded:"_2tqNT",descriptionTruncationNotRequired:"_1fn3S",descriptionTruncated:"_3kvp0"}},1234:function(e,t,a){e.exports={truncate:"_1ByhS",resetBtn:"DWLeW",containerTruncated:"_3PLD4",text:"KNDj7",textNotTruncated:"_2FfeD",textTruncated:"b5rtm _1ByhS",toggleButton:"_19oEl DWLeW",expandButton:"_2mJKr"}},1235:function(e,t){
/*!
 * array-to-sentence | MIT (c) Shinnosuke Watanabe
 * https://github.com/shinnn/array-to-sentence
*/
e.exports=function(e,t){"use strict";if(!Array.isArray(e))throw new TypeError(String(e)+" is not an array. Expected an array.");function a(e){if("string"!=typeof t[e])throw new TypeError(String(t[e])+" is not a string. `"+e+"` option must be a string.")}return void 0===(t=t||{}).separator?t.separator=", ":a("separator"),void 0===t.lastSeparator?t.lastSeparator=" and ":a("lastSeparator"),0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(t.separator)+t.lastSeparator+e[e.length-1]}},1236:function(e,t,a){var n=a(224),o=NaN;e.exports=function(e){return"number"==typeof e?e:n(e)?o:+e}},1237:function(e,t,a){var n=a(1236),o=a(618);e.exports=function(e,t){return function(a,r){var i;if(void 0===a&&void 0===r)return t;if(void 0!==a&&(i=a),void 0!==r){if(void 0===i)return r;"string"==typeof a||"string"==typeof r?(a=o(a),r=o(r)):(a=n(a),r=n(r)),i=e(a,r)}return i}}},1238:function(e,t,a){var n=a(1237)(function(e,t){return e+t},0);e.exports=n},614:function(e,t,a){"use strict";a.r(t);var n=a(3),o=a(1238),r=a.n(o),i=a(4),c=a.n(i),s=a(1),l=a.n(s),u=a(0),m=a.n(u),d=a(15),p=a(54),h=a(383),f=a(1471),b=a(1456),g=a(56),v=a(1457),y=a(1453),O=a(1469),_=a(1458),E=a(9),I=a(21);var w=function(){function e(e,t,a){void 0===a&&(a=!1),this.accumulator=e,this.seed=t,this.hasSeed=a}return e.prototype.call=function(e,t){return t.subscribe(new R(e,this.accumulator,this.seed,this.hasSeed))},e}(),R=function(e){function t(t,a,n,o){var r=e.call(this,t)||this;return r.accumulator=a,r._seed=n,r.hasSeed=o,r.index=0,r}return E.a(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,a=this.index++;try{t=this.accumulator(this.seed,e,a)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(I.a);function S(e){return function(t){return t.lift(new j(e))}}var j=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new T(e,this.value))},e}(),T=function(e){function t(t,a){var n=e.call(this,t)||this;return n.value=a,n}return E.a(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(I.a),N=a(379);var D=a(382);var C=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new P(e,this.predicate,this.source))},e}(),P=function(e){function t(t,a,n){var o=e.call(this,t)||this;return o.predicate=a,o.source=n,o.count=0,o.index=0,o}return E.a(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(I.a),x=a(10),k=a(34),L=a(14),U=a(117),B=a(222),M=a(20),F=a(174),A=a(125),W=a(1008),q=a(405),z=a(28),H=a(181),Z=a(457),G=a(5),V=a(32),K=a(254),Y=a(8),J=a.n(Y),X=a(404),Q=a.n(X),$=a(1061),ee=a.n($),te=a(179),ae=a(1235),ne=a.n(ae),oe=a(184),re=a.n(oe),ie=a(151),ce=a.n(ie),se=a(251),le=a.n(se),ue=a(1053);function me(e){var t=le()(e,ue.c).map(function(e){return e.title});return ne()(t)}function de(e,t){var a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).cleanVersion,n=void 0!==a&&a,o=[n?"Download this photo":"Download this free HD photo"];if(t.tags&&!n){var r=me(t.tags);o.push("of",r)}if(ce()(t,"location.city")||ce()(t,"location.country")){var i=[t.location.city,t.location.country].filter(function(e){return!!e}).join(", ");o.push("in "+i)}return o.push("by "+e.name+" (@"+e.username+")"),o.join(" ")}function pe(e){var t=e.user,a=function(e,t){var a=ce()(t,"story.title"),n="photo by "+e.name+" (@"+e.username+") on Unsplash";if(a)return re()(a+" "+n);if(Object(V.d)(t)){var o=me(t.tags);return re()(o+" HD "+n)}return"HD "+n}(t,e),o=de(t,e),r=function(e){var t=e.id,a=e.slug;return"https://unsplash.com/photos/"+(a?t+"/"+a:t)}(e),i=de(t,e,{cleanVersion:!0});return{title:a,description:o,canonicalUrl:r,meta:Object(te.f)({userOption:n.a.some(t),photoOption:n.a.some(e),title:a,description:o,socialDescriptionOption:n.a.some(i),canonicalUrl:r})}}var he=a(406),fe=a(1103),be=a(1449),ge=a(152),ve=a(324),ye=a(18),Oe=Object(ye.a)("M16 0c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm2 25c0 .6-.4 1-1 1h-2c-.6 0-1-.4-1-1v-12c0-.6.4-1 1-1h2c.6 0 1 .4 1 1v12zm0-16c0 .6-.4 1-1 1h-2c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1h2c.6 0 1 .4 1 1v2z"),_e=a(1119),Ee=a(33),Ie=a(1106),we=a(214),Re=a(185),Se=a(6),je=a(1234),Te=a.n(je),Ne=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var De=Object(Se.unionize)({NotRequired:Object(Se.ofType)(),Truncated:Object(Se.ofType)(),Expanded:Object(Se.ofType)()}),Ce=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.updateRef=function(e){a.textElRef=e},a.state=a.getInitialState(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["PureComponent"]),Ne(t,[{key:"getInitialState",value:function(){return{doesRequireTruncation:!0,shouldForceTruncation:!0}}},{key:"componentDidMount",value:function(){var e,t,a=this,o=(t=n.a.of(a.textElRef).get(),(e=t).offsetWidth<e.scrollWidth);this.setState({doesRequireTruncation:o,shouldForceTruncation:!1})}},{key:"render",value:function(){var e,t,a,o,r,i,c,s=this.props,l=s.text,u=s.containerClassNameTruncated,d=s.containerClassNameExpanded,p=s.containerClassNameTruncationNotRequired,h=(e=this.props,t=this.state,a=e.onRequestToggle,o=e.shouldTruncateIfRequired,r=e.shouldShowTruncateButtonWhenExpanded,i=t.doesRequireTruncation,c=t.shouldForceTruncation,i?c||o?De.Truncated({onRequestToggle:a}):De.Expanded({onRequestToggle:a,shouldShowTruncateButton:r}):De.NotRequired({})),f=De.match({Truncated:function(e){var t=e.onRequestToggle;return n.a.some({buttonText:"Read more",onRequestToggle:t})},Expanded:function(e){var t=e.onRequestToggle;return e.shouldShowTruncateButton?n.a.some({buttonText:"Show less",onRequestToggle:t}):n.a.none()},NotRequired:function(){return n.a.none()}})(h);return m.a.createElement("div",{className:J()(Te.a.container,De.match({Truncated:function(){return[Te.a.containerTruncated,u]},Expanded:function(){return[d]},NotRequired:function(){return[p]}})(h))},m.a.createElement("p",{ref:this.updateRef,className:J()(Te.a.text,De.match({Truncated:function(){return Te.a.textTruncated}},function(){return Te.a.textNotTruncated})(h))},l)," ",f.map(function(e){var t=e.buttonText,a=e.onRequestToggle;return m.a.createElement("button",{className:Te.a.toggleButton,onClick:a},t)}).orUndefined())}}]),t}();Ce.displayName="TruncatedTextToggle";var Pe=Ce,xe=a(1232),ke=a.n(xe),Le=Object(Re.progressivelyEnhance)(function(e){var t=e.description,a=e.shouldTruncate,n=e.onRequestToggleTruncation;return m.a.createElement(Pe,{key:t,text:t,containerClassNameTruncationNotRequired:ke.a.descriptionTruncationNotRequired,containerClassNameExpanded:ke.a.descriptionExpanded,containerClassNameTruncated:ke.a.descriptionTruncated,shouldTruncateIfRequired:a,shouldShowTruncateButtonWhenExpanded:!1,onRequestToggle:n})}),Ue=a(1230),Be=a.n(Ue),Me=function(e){return m.a.createElement("div",{className:Be.a.textContainerItem},e)},Fe=function(e){var t=e.photo,a=e.location,o=e.shouldTruncateDescription,r=e.onRequestToggleTruncatedDescription,i={pathname:Object(we.b)({photoId:t.id}),state:a.state},c={pathname:Object(we.c)({photoId:t.id}),state:a.state},s=Object(V.d)(t)?n.a.of(t.story.description):n.a.none(),l=Object(V.d)(t)?n.a.of(t.location).map(function(e){return e.title}):n.a.none(),u={url:t.links.html,title:n.a.of(t.description).getOrElse(""),text:Object(ve.b)(t.user)};return m.a.createElement("div",{className:Be.a.container},m.a.createElement("div",{className:Be.a.textContainer},l.map(function(e){return m.a.createElement(be.a,{to:Object(ge.b)(e),className:Be.a.locationLink},m.a.createElement(_e.a,{className:Be.a.locationIcon}),m.a.createElement("span",{className:Be.a.locationTitle},e))}).map(Me).orUndefined(),s.map(function(e){return m.a.createElement(Le,{description:e,shouldTruncate:o,onRequestToggleTruncation:r})}).map(Me).orUndefined()),m.a.createElement("div",{className:Be.a.cell},m.a.createElement(Ie.a,{shareLocationDescriptor:c,shareOptions:u,className:Be.a.smallButton})),m.a.createElement("div",{className:Be.a.cell},m.a.createElement(Ee.a,{className:Be.a.button,tag:"link",buttonType:"outline",buttonSize:"small",to:i},m.a.createElement(Oe,{className:Be.a.buttonIcon}),m.a.createElement("span",{className:Be.a.buttonText},"Info"))))};Fe.displayName="Footer";var Ae=Fe,We=a(1108),qe=a(1099),ze=a(1097),He=a(1065),Ze=a(11),Ge=a(1132),Ve=a(1064),Ke=a(1113),Ye=a.n(Ke),Je=Object(Ze.createSelector)(function(e,t){return t},function(e){return Object(Ge.a)({photo:e,className:Ye.a.secondaryLabel}).getOrElse(Ve.a.Username({}))}),Xe=Object(d.connect)(function(e,t){return{secondaryLabel:Je(e,t.photo)}})(function(e){var t=e.className,a=e.location,n=e.photo,o=e.isLoggedIn,r=e.secondaryLabel,i=o?void 0:"green",c=o?"Download":"Download free";return m.a.createElement("header",{className:J()(t,Ye.a.container)},m.a.createElement("div",{className:Ye.a.photographer},m.a.createElement(He.a,{includeAvatar:!0,userId:n.user.id,secondaryLabel:r,type:"emphasiseUsername"})),m.a.createElement("div",{className:Ye.a.actions},m.a.createElement("div",{className:Ye.a.buttonCell},m.a.createElement(ze.a,{photoId:n.id,location:a})),m.a.createElement("div",{className:Ye.a.buttonCell},m.a.createElement(We.a,{photoId:n.id,location:a})),m.a.createElement("div",{className:Ye.a.downloadButtonCell},m.a.createElement(qe.a,{photoId:n.id,showLabel:!0,type:i,label:c,className:Ye.a.downloadButton}))))}),Qe=a(409),$e=Object(ye.a)("M19 3v3h4.8l-4.4 4.5 2 2L26 8.2v5h3V3M6 24v-4.6H3V29h9.6v-3H8l5-5-2-2"),et=Object(ye.a)("M3 19v3h4.8l-4.4 4.5 2 2L10 24v5h3V19m9-11V3.4h-3V13h9.6v-3H24l5-5-2-2"),tt=a(1104),at=a(16),nt=a(408),ot=a(256),rt=a(1122),it=a(1155),ct=a.n(it);function st(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var lt=Object(Se.unionize)({Unenhanced:Object(Se.ofType)(),Enhanced:Object(Se.ofType)()}),ut=function(e){var t=e.magicalVerticalOffset,a=function(){var e=Object(nt.e)(10),a=20+t,n=Object(nt.g)(Ke.outerHorizontalGutter);return{TOTAL_HORIZONTAL_PADDING:2*n,TOTAL_VERTICAL_PADDING:a,HORIZONTAL_PADDING_LENGTH:Object(nt.e)(n),VERTICAL_PADDING_LENGTH:e}},o=Object(nt.i)(1),r=a(),i=r.TOTAL_HORIZONTAL_PADDING,s=r.TOTAL_VERTICAL_PADDING,l=function(){var e=a(),t=e.TOTAL_HORIZONTAL_PADDING,n=e.TOTAL_VERTICAL_PADDING;return{IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH:Object(nt.a)(o+" - "+Object(nt.e)(t)),IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH:Object(nt.a)("100vh - "+Object(nt.e)(n))}}(),u=l.IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH,m=l.IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH,d=function(e){var t,a=e.photoDimensions;if(Object(rt.b)(a)){var n=a.width/a.height;return t=500,Math.ceil(t*n)}return 500},p=function(e){var t,a=e.photoDimensions,n=a.width/a.height,o=d({photoDimensions:a});return{minWidthLength:Object(nt.e)(o),maxWidthLength:(t=m,Object(nt.a)("("+t+") * "+Object(ot.c)(n)))}},h=function(e){var t=e.photoDimensions;if(e.isZoomedOut){var a=p({photoDimensions:t}),n=a.minWidthLength,r=a.maxWidthLength,c=function(e){var t,a=e.photoDimensions,n=a.width,o=a.height,r=o/n,c=d({photoDimensions:a}),l=(t=c,Math.ceil(t*r));return{isMinSizeMediaConditions:["(max-width: "+Object(nt.e)(c+i)+")","(max-height: "+Object(nt.e)(l+s)+")"],isConstrainedByViewportHeightMediaCondition:"(min-aspect-ratio: "+n+"/"+o+")"}}({photoDimensions:t}),l=c.isMinSizeMediaConditions,m=c.isConstrainedByViewportHeightMediaCondition;return[].concat(st(l.map(function(e){return{mediaCondition:e,width:n}})),[{mediaCondition:m,width:r},{width:u}])}return[{width:o}]},f=c()(function(e){var t=e.photoDimensions,a=e.zoomableOptions;return[].concat(st([{mediaCondition:it.isFixedMediaCondition,width:o}]),st(h({photoDimensions:t,isZoomedOut:a.isZoomedOut})))},Qe.d);return{getPaddingConstants:a,getImgSrcSetString:function(e){var t=e.photoDimensions,a=e.baseUrl,o=t.width,r=function(e){var t,a=e.photoDimensions,n=a.width,o=n/a.height;return{lowerBound:(t=500,Math.ceil(t*o)),upperBound:n}}({photoDimensions:t}),i=r.lowerBound,c=r.upperBound;return Object(Qe.c)({baseUrl:a,lowerBound:i,upperBound:c,originalWidth:o,interval:300,getParams:n.a.some(function(){return{q:80}})})},getMinAndMaxWidthsLengths:p,getImgSizesString:f,createFallbackSrc:function(e){return Object(at.b)({url:e,width:String(1e3),q:"80"})}}},mt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var dt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderZoomableImageOverlay=function(e){var t=e.isZoomedOut?$e:et;return m.a.createElement("div",{className:ct.a.overlay},m.a.createElement("div",{className:ct.a.overlayChild},m.a.createElement(t,{className:ct.a.zoomToggleIcon})))},a.renderImage=function(){var e=a.props,t=e.photo,o=e.maybeInitialSrc,r=e.onImgLoad,i=e.magicalVerticalOffset,c=e.renderType,s=a.state.shouldUseInitialSrcIfAvailable,l=t.urls.raw,u=ut({magicalVerticalOffset:i}),d=u.getImgSizesString,p=u.getImgSrcSetString,h=u.createFallbackSrc,f={width:t.width,height:t.height},b=d({zoomableOptions:c.zoomable,photoDimensions:f}),g=function(){return p({photoDimensions:f,baseUrl:l})},v=s?o.map(function(e){return Object(Qe.e)([{url:e}])}).getOrElseL(g):g(),y=h(l);return m.a.createElement(tt.a,{imgDimensions:t,containerClassName:ct.a.imagePlaceholder,key:t.id,sizes:b,srcSet:v,onLoad:r,src:y,alt:n.a.of(t.description).orUndefined()})},a.renderZoomableImageButton=function(e){var t=e.isZoomedOut,n=e.onRequestToggleZoom,o=J()(ct.a.imageButton,t?ct.a.imageButtonZoomedOut:ct.a.imageButtonZoomedIn);return m.a.createElement("button",{className:o,onClick:n},a.renderZoomableImageOverlay(e),a.renderImage())},a.renderZoomableImageContainer=function(){var e=a.props,t=e.photo,n=e.magicalVerticalOffset,o=e.renderType,r=ut({magicalVerticalOffset:n}),i=r.getMinAndMaxWidthsLengths,c=r.getPaddingConstants,s=o.zoomable.isZoomedOut,l=c(),u=l.HORIZONTAL_PADDING_LENGTH,d=l.VERTICAL_PADDING_LENGTH,p=i({photoDimensions:{width:t.width,height:t.height}}),h=p.minWidthLength,f=p.maxWidthLength;return m.a.createElement("div",{style:s?{padding:d+" "+u}:{}},m.a.createElement("div",{style:s?{minWidth:h,maxWidth:f}:{},className:ct.a.imageContainer},lt.match({Unenhanced:a.renderImage,Enhanced:function(e){return a.renderZoomableImageButton(e.zoomable)}})(o)))},a.state=a.getInitialState(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["PureComponent"]),mt(t,[{key:"getInitialState",value:function(){return{shouldUseInitialSrcIfAvailable:!0}}},{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame(function(){requestAnimationFrame(function(){e.disableInitialSrc()})})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.photo;e.photo.id!==t.id&&this.setState(this.getInitialState)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.shouldUseInitialSrcIfAvailable&&requestAnimationFrame(function(){requestAnimationFrame(function(){e.state.shouldUseInitialSrcIfAvailable&&e.disableInitialSrc()})})}},{key:"disableInitialSrc",value:function(){this.setState({shouldUseInitialSrcIfAvailable:!1})}},{key:"render",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:ct.a.isFixed},this.renderImage()),m.a.createElement("div",{className:ct.a.isZoomable},this.renderZoomableImageContainer()))}}]),t}(),pt=a(1098),ht=a(1068),ft=a(1125),bt=a(1054),gt=a(1226),vt=a.n(gt),yt=Object(ft.a)(bt.b),Ot=bt.a.Multi({shouldUseContainerPadding:!1}),_t=function(e){var t=e.photoIdsRemoteData,a=function(e){var t=e.bodyPhotoIdsRemoteData;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:vt.a.clearfix},m.a.createElement("h4",{className:vt.a.heading},"Related photos")),m.a.createElement("div",{className:vt.a.contentContainer},function(e){var t=e.bodyPhotoIdsRemoteData;switch(t.type){case K.e.Reloading:case K.e.Success:return m.a.createElement(yt,{photoIds:t.value,mode:Ot});case K.e.Loading:return m.a.createElement(he.a,{padContentBelow:!1})}}({bodyPhotoIdsRemoteData:t})))};switch(t.type){case K.e.Reloading:case K.e.Loading:return a({bodyPhotoIdsRemoteData:t});case K.e.Success:return 0===t.value.length?null:a({bodyPhotoIdsRemoteData:t});case K.e.Failure:case K.e.NotAsked:return null}},Et=function(e){var t=e.type===V.a.related?"Related collections":"Featured in "+e.total+" collections",a=e.results.map(function(e){return e.id});return m.a.createElement(pt.a,{relatedCollectionIds:a,heading:t})},It=function(e){var t=e.photo,a=e.relatedPhotoIdsRemoteData,o=n.a.of(Object(V.d)(t)?t.related_collections:void 0),r=Object(V.d)(t)?n.a.some(t.tags):n.a.none();return m.a.createElement(m.a.Fragment,null,m.a.createElement(_t,{photoIdsRemoteData:a}),o.map(Et).getOrElse(void 0),r.map(function(e){return m.a.createElement(ht.a,{headingCopy:"Related tags",keywords:e,showHeading:!0})}).orUndefined())},wt=a(1224),Rt=a.n(wt),St=function(e){var t=e.location,a=e.maybeCachedPhoto,n=e.photoFullInfoRemoteData,o=e.maybeMainImageInitialSrc,r=e.relatedPhotoIdsRemoteData,i=e.onMainImageLoad,c=e.shouldTruncateDescription,s=e.onRequestToggleTruncatedDescription,l=e.isLoggedIn,u=e.children,d=e.mainImageRenderType,p=function(e){var a=e.photo,n=pe(a),u=n.title,p=n.meta,h=n.canonicalUrl,f=Object(L.c)(t),b=f?155:200;return m.a.createElement("div",{className:Rt.a.wrapper},m.a.createElement(Q.a,{title:u,meta:p,link:Object(te.e)(h)}),m.a.createElement("div",null,m.a.createElement("div",{className:J()(f&&Rt.a.stickyHeaderContainer)},m.a.createElement(Xe,{photo:a,location:t,isLoggedIn:l})),m.a.createElement(fe.a,{photoId:a.id},m.a.createElement(dt,{renderType:d,maybeInitialSrc:o,photo:a,onImgLoad:i,magicalVerticalOffset:b})),m.a.createElement(Ae,{photo:a,location:t,shouldTruncateDescription:c,onRequestToggleTruncatedDescription:s})),m.a.createElement("div",{className:Rt.a.container},m.a.createElement(It,{photo:a,relatedPhotoIdsRemoteData:r})))};return function(e){return m.a.createElement("div",{"data-test":"photos-route"},e,u)}(a.filter(V.c).map(function(e){return p({photo:e})}).getOrElseL(function(){switch(n.type){case K.e.Reloading:case K.e.Success:return p({photo:n.value});case K.e.Loading:return m.a.createElement("div",{className:Rt.a.spinnerWrapper},m.a.createElement(he.a,{padContentBelow:!1}));case K.e.NotAsked:case K.e.Failure:return null}}))};St.displayName="Photos";var jt,Tt=ee()(St),Nt=a(204),Dt=a(1222),Ct=a.n(Dt),Pt=function(e){return{backgroundImage:["linear-gradient(hsla(0, 0%, 100%, 0.8), white 150px)",Object(at.w)(e)].join(", ")}},xt=function(e){return function(e){var t=e.maybeRawPhotoUrl,a=e.maybeMainImageCurrentSrc;return t.map(function(e){return Object(at.b)({url:e,width:String(200),blur:String(20)})}).orElse(a)}({maybeRawPhotoUrl:e.maybeRawPhotoUrl,maybeMainImageCurrentSrc:e.maybeMainImageCurrentSrc}).map(Pt).orUndefined()},kt=function(e){var t=e.photoId,a=e.maybeRawPhotoUrl,n=e.maybeMainImageCurrentSrc,o=e.modalLocationState,r=e.children;return m.a.createElement(Nt.a,{redirectTo:{pathname:"/photos/"+t},modalLocationState:o,contentStyles:xt({maybeRawPhotoUrl:a,maybeMainImageCurrentSrc:n}),contentClassName:Ct.a.modalContent},r)},Lt=a(19),Ut=Object(ye.a)("M27.5 18.08a1 1 0 0 0-1.42 0l-9.08 8.59v-23.67a1 1 0 0 0-2 0v23.67l-9.08-8.62a1 1 0 1 0-1.38 1.45l10.77 10.23a1.19 1.19 0 0 0 .15.09.54.54 0 0 0 .16.1.94.94 0 0 0 .76 0 .54.54 0 0 0 .16-.1l.15-.09 10.77-10.23a1 1 0 0 0 .04-1.42z"),Bt=Object(ye.a)("M31.8 15.1l-.2-.4c-3.5-6.9-9.7-11.5-15.6-11.5-6.3 0-12.3 4.5-15.7 11.7l-.2.4c-.2.5-.2 1.1 0 1.6l.2.4c3.6 7 9.7 11.5 15.6 11.5 6.3 0 12.3-4.5 15.6-11.6l.2-.4c.4-.5.4-1.2.1-1.7zm-2 1.2c-3 6.5-8.3 10.5-13.8 10.5-5.2 0-10.6-4.1-13.8-10.4l-.2-.4.1-.3c3.1-6.5 8.4-10.5 13.9-10.5 5.2 0 10.6 4.1 13.8 10.4l.2.4-.2.3zm-13.8-6.6c-3.5 0-6.3 2.8-6.3 6.3s2.8 6.3 6.3 6.3 6.3-2.8 6.3-6.3-2.8-6.3-6.3-6.3zm0 10.6c-2.4 0-4.3-1.9-4.3-4.3s1.9-4.3 4.3-4.3 4.3 1.9 4.3 4.3-1.9 4.3-4.3 4.3z"),Mt=Object(ye.a)("M28.7 5.5c-1.6-1.5-3.6-2.4-5.7-2.4s-4.2.8-5.7 2.4l-1.3 1.6-1.3-1.6c-1.5-1.5-3.6-2.4-5.7-2.4s-4.1.9-5.7 2.4c-3.1 3.1-3.1 8.2 0 11.4l10.8 11.1c.5.5 1.2.8 1.9.8s1.4-.3 1.9-.8l10.7-11.2c3.2-3.1 3.2-8.2.1-11.3zm-1.5 10l-10.7 11.1c-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-10.7-11.1c-2.3-2.4-2.3-6.2 0-8.5 1.1-1.2 2.6-1.9 4.2-1.9s3.1.6 4.2 1.7l2.8 3.4 2.7-3.4c1.1-1.1 2.6-1.8 4.2-1.8s3.1.6 4.2 1.8c2.5 2.5 2.5 6.3.1 8.7z"),Ft=a(36),At=function(e){return"ƒ/"+e},Wt=function(e){return e+"s"},qt=function(e){return e+"mm"},zt=a(1220),Ht=a.n(zt);!function(e){e[e.views=0]="views",e[e.downloads=1]="downloads",e[e.likes=2]="likes"}(jt||(jt={}));var Zt=function(){return m.a.createElement("div",{className:Ht.a.container},m.a.createElement("div",{className:Ht.a.cell},m.a.createElement(he.a,{padContentBelow:!1})))},Gt=function(e){var t=e.type,a=e.statRemoteData,n=function(e){switch(e){case jt.views:return Bt;case jt.downloads:return Ut;case jt.likes:return Mt}}(t);return m.a.createElement("div",{className:Ht.a.stat},m.a.createElement("dt",{className:Ht.a.statLabel},m.a.createElement(n,{className:Ht.a.statLabelIcon}),m.a.createElement("span",{className:Ht.a.statLabelText},function(e){switch(e){case jt.views:return"Views";case jt.downloads:return"Downloads";case jt.likes:return"Likes"}}(t))),function(e){var t=e.statRemoteData;switch(t.type){case K.e.Success:var a=t.value;return m.a.createElement("dd",{className:Ht.a.statValue},m.a.createElement("span",{className:Ht.a.statValueTotal},Object(at.i)(a.total)),m.a.createElement("span",{className:Ht.a.statValueDelta},Object(at.k)(a.historical.change)," since last month"));case K.e.Loading:return m.a.createElement("dd",{className:Ht.a.statValue},m.a.createElement("div",{className:Ht.a.statValueTotalPlaceholder}),m.a.createElement("div",{className:Ht.a.statValueDeltaPlaceholder}))}}({statRemoteData:a}))},Vt=function(e){return m.a.createElement("dl",{key:"stats-body",className:Ht.a.stats},Gt({type:jt.views,statRemoteData:e.views}),Gt({type:jt.downloads,statRemoteData:e.downloads}),Gt({type:jt.likes,statRemoteData:e.likes}))},Kt=function(e){var t=e.maybeCachedPhotoStats,a=e.photoStatsRemoteData;return t.map(function(e){return Vt({views:new K.f(e.views),downloads:new K.f(e.downloads),likes:new K.f(e.likes)})}).orElseL(function(){switch(a.type){case K.e.NotAsked:return n.a.none();case K.e.Failure:return n.a.some((a.value,m.a.createElement("div",{key:"stats-failure",className:Ht.a.container},m.a.createElement("div",{className:Ht.a.cell},m.a.createElement("p",{className:Ht.a.p},"Sorry, there was an error loading stats. Please try again later.")))));case K.e.Reloading:case K.e.Success:var e=a.value;return n.a.some(Vt({views:new K.f(e.views),downloads:new K.f(e.downloads),likes:new K.f(e.likes)}));case K.e.Loading:return n.a.some(Vt({views:new K.b,downloads:new K.b,likes:new K.b}))}})},Yt=function(e){var t=function(e){var t,a=e.photo;return[{name:"Camera Make",value:(t=a.exif.make,""!==t?t:void 0)},{name:"Camera Model",value:Object(Lt.h)(a.exif.model)},{name:"Focal Length",value:Object(Lt.f)(qt,Object(Lt.h)(a.exif.focal_length))},{name:"Aperture",value:Object(Lt.f)(At,Object(Lt.h)(a.exif.aperture))},{name:"Shutter Speed",value:Object(Lt.f)(Wt,Object(Lt.h)(a.exif.exposure_time))},{name:"ISO",value:Object(Lt.h)(a.exif.iso)},{name:"Dimensions",value:a.width+" × "+a.height}].map(function(e){var t=e.name,a=e.value;return{name:t,value:Object(Lt.c)(function(){return"--"},a)}})}({photo:e.photo});return m.a.createElement("dl",{key:"metadata-body",className:Ht.a.metadata},t.map(function(e){var t=e.name,a=e.value;return m.a.createElement("div",{key:t,className:Ht.a.metadataItem},m.a.createElement("dt",{className:Ht.a.metadataItemName},t),m.a.createElement("dd",{className:Ht.a.metadataItemValue},a))}))},Jt=function(e){var t=e.cachedPhoto,a=e.photoFullInfoRemoteData;return Object(V.d)(t)?n.a.some(Yt({photo:t})):function(){switch(a.type){case K.e.Reloading:case K.e.Success:return n.a.some(Yt({photo:a.value}));case K.e.Loading:return n.a.some(m.a.createElement("div",{key:"loading"},Zt()));case K.e.NotAsked:return n.a.none();case K.e.Failure:return n.a.some((a.value,m.a.createElement("div",{key:"metadata-failure",className:Ht.a.container},m.a.createElement("div",{className:Ht.a.cell},m.a.createElement("p",{className:Ht.a.p},"Sorry, there was an error loading metadata. Please try again later.")))))}}()},Xt=function(e){var t=e.auth,a=e.photo,o=(n.a.of(t.user).exists(function(e){return e.username===a.user.username})?n.a.some("/account/photos"):t.isAdmin?n.a.some("/super/photos/"+a.id+"/edit"):n.a.none()).map(function(e){return{key:"edit-photo",component:m.a.createElement("a",{href:e},"Edit photo")}}),r=Object(Lt.b)([o]);return r.length>0?n.a.some(m.a.createElement("div",{key:"other-links",className:Ht.a.containerFooter},r.map(function(e){var t=e.key,a=e.component;return m.a.createElement("div",{key:t,className:Ht.a.cell},a)}))):n.a.none()},Qt=function(e){var t=e.cachedPhoto,a=e.photoFullInfoRemoteData,o=e.photoStatsRemoteData,r=e.auth,i=Object(at.h)(new Date(t.created_at)),c=Object(V.e)(t)?n.a.some(t.stats):n.a.none(),s=Object(V.d)(t)?n.a.some(n.a.of(t.story.title).getOrElseL(function(){return"Info"})):n.a.none(),l=Object(Lt.b)([Kt({maybeCachedPhotoStats:c,photoStatsRemoteData:o}),Jt({cachedPhoto:t,photoFullInfoRemoteData:a}),Xt({photo:t,auth:r})]);return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:Ht.a.containerTitle},m.a.createElement("div",{className:Ht.a.cell},s.map(function(e){return m.a.createElement("h2",{className:Ht.a.title},e)}).orNull(),m.a.createElement("span",{className:Ht.a.datePublished},"Published on ",m.a.createElement("time",{dateTime:t.created_at},i)))),Object(Ft.f)(l,function(e){return m.a.createElement("hr",{key:"separator-"+e,className:Ht.a.hr})}))},$t=Object(d.connect)(function(e,t){return{auth:Object(z.b)(e)}})(function(e){var t=e.maybeCachedPhoto,a=e.photoFullInfoRemoteData,n=e.photoStatsRemoteData,o=e.auth;return t.filter(V.c).map(function(e){return Qt({cachedPhoto:e,photoStatsRemoteData:n,auth:o,photoFullInfoRemoteData:a})}).getOrElseL(function(){switch(a.type){case K.e.Reloading:case K.e.Success:return Qt({cachedPhoto:a.value,photoStatsRemoteData:n,auth:o,photoFullInfoRemoteData:a});case K.e.Loading:return Zt();case K.e.NotAsked:case K.e.Failure:return null}})}),ea=function(e){var t=e.maybeCachedPhoto,a=e.photoId,n=e.maybeMainImageCurrentSrc,o=e.photoFullInfoRemoteData,r=e.photoStatsRemoteData,i=e.modalLocationState,c=t.filter(V.c).map(function(e){return e.urls.raw});return m.a.createElement(kt,{photoId:a,modalLocationState:i,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:c},m.a.createElement($t,{maybeCachedPhoto:t,photoFullInfoRemoteData:o,photoStatsRemoteData:r}))},ta=a(68),aa=a(46),na=a(17),oa=a(205),ra=a(1100),ia=a(1218),ca=a.n(ia),sa=function(e){var t=e.photo,a=t.links.html,n=function(e){return Object(na.m)(a,{utmSource:e,utmContent:ta.g.PHOTOS_PAGE_SHARE})},o=Object(ve.b)(t.user),r=Object(aa.d)(t.urls.raw)({w:2e3}),i=[{url:n("facebook"),type:oa.a.facebook({})},{url:n("pinterest"),type:oa.a.pinterest({message:o,media:r})},{url:n("twitter"),type:oa.a.twitter({message:o})},{url:n("email"),type:oa.a.email({})}];return m.a.createElement(ra.a,{title:"Photo by "+t.user.name,buttonsShareProps:i,link:a})},la=function(e){var t=e.maybeCachedPhoto,a=e.photoFullInfoRemoteData;return t.filter(V.c).map(function(e){return sa({photo:e})}).getOrElseL(function(){switch(a.type){case K.e.Reloading:case K.e.Success:return sa({photo:a.value});case K.e.Loading:return m.a.createElement("div",{className:ca.a.container},m.a.createElement("div",{className:ca.a.cell},m.a.createElement(he.a,{padContentBelow:!1})));case K.e.NotAsked:case K.e.Failure:return null}})},ua=function(e){var t=e.maybeCachedPhoto,a=e.photoId,n=e.maybeMainImageCurrentSrc,o=e.photoFullInfoRemoteData,r=e.modalLocationState;return m.a.createElement(kt,{photoId:a,modalLocationState:r,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:t.filter(V.c).map(function(e){return e.urls.raw})},m.a.createElement(la,{maybeCachedPhoto:t,photoFullInfoRemoteData:o}))},ma=Object(U.e)("photo"),da=function(e){return c()(e.photos.getPhotoWithInfo,Object(g.a)(function(e){return new K.f(e)}))},pa=function(e){var t=e.value,a=ma(t).entities;return[Object(x.rb)(a),x.a.UpdatePhotoFullInfoRemoteData({photoId:t.id,photoFullInfoRemoteData:e})]},ha=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var fa=Object(U.e)("relatedPhotos"),ba=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.resetNumberOfRequests=function(){a.resetNumberOfRequestsSubject.next({})},a.onRequestToggleTruncatedDescription=function(){var e=a.props.location;a.context.router.history.replace(Object(L.o)(function(e){return{shouldTruncateDescription:!e.shouldTruncateDescription}})(e))},a.state=a.getInitialState(),a.onRequestMainImageToggleZoom=a.onRequestMainImageToggleZoom.bind(a),a.onMainImageLoad=a.onMainImageLoad.bind(a),a.onRootRouteLeaveSubject=new p.a,a.onInfoRouteLeaveSubject=new p.a,a.requestSubject=new p.a,a.resetNumberOfRequestsSubject=new p.a,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["PureComponent"]),ha(t,[{key:"getDefaultState",value:function(){return{mainImageCurrentSrc:n.a.none()}}},{key:"getInitialState",value:function(){return this.getDefaultState()}},{key:"getResetState",value:function(){return this.getDefaultState()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.renderType;this.setupProgressBar(),q.a.is.Unenhanced(a)||this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet(),t.params.subRoute===F.a.info&&this.fetchPhotoStatsThenCacheAndSet()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.match,o=a.maybePhoto,r=a.photoFullInfoRemoteData,i=a.photoStatsRemoteData,c=e.maybePhoto;n.params.id!==e.match.params.id?this.reset():c.forEach(function(e){o.map(function(t){return t!==e}).getOrElse(!0)&&(r.type===K.e.Success&&Object(V.d)(e)&&t.updatePhotoFullInfoRemoteData(new K.f(e)),i.type===K.e.Success&&Object(V.e)(e)&&t.updatePhotoStatsRemoteData(new K.f(e.stats)))})}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,a=t.id,n=t.subRoute,o=e.match.params,r=o.id,i=o.subRoute;a!==r&&(this.cleanup(),this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet());var c=i===F.a.info,s=n===F.a.info;!c&&s?this.fetchPhotoStatsThenCacheAndSet():c&&!s&&this.onInfoRouteLeaveSubject.next({})}},{key:"componentWillUnmount",value:function(){this.cleanup()}},{key:"setupProgressBar",value:function(){var e=this.requestSubject.asObservable(),t=this.props,a=t.hideProgressBar,n=t.showProgressBar;this.resetNumberOfRequestsSubject.asObservable().pipe(Object(_.a)({}),Object(v.a)(function(){return e.pipe(Object(D.a)(function(e){var t,a=Object(h.a)({}),n=e.pipe(function(e){return e.lift(new C(t,e))});return a.pipe(S(1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(N.a.apply(void 0,[t].concat(e)))}}(n.pipe(S(-1))))}),function(e,t){var a=!1;return arguments.length>=2&&(a=!0),function(n){return n.lift(new w(e,t,a))}}(r.a,0),Object(_.a)(0))})).pipe(Object(g.a)(function(e){return e>0}),Object(O.a)()).subscribe(function(e){e?n():a()})}},{key:"cleanup",value:function(){this.onRootRouteLeaveSubject.next({}),this.onInfoRouteLeaveSubject.next({})}},{key:"updatePhotoFullInfoRemoteData",value:function(e){var t=this.props,a=t.updatePhotoFullInfoRemoteData;a({photoId:t.match.params.id,photoFullInfoRemoteData:e})}},{key:"updateRelatedPhotoIdsRemoteData",value:function(e){var t=this.props,a=t.updateRelatedPhotoIdsRemoteData;a({photoId:t.match.params.id,relatedPhotoIdsRemoteData:e})}},{key:"updatePhotoStatsRemoteData",value:function(e){var t=this.props,a=t.updatePhotoStatsRemoteData;a({photoId:t.match.params.id,photoStatsRemoteData:e})}},{key:"reset",value:function(){this.setState(this.getResetState()),this.resetNumberOfRequests()}},{key:"fetchThenCacheAndSet",value:function(){var e=this.props,t=e.match,a=e.maybePhoto,n=e.setErrorFlash,o=e.dispatch,r=t.params.id,i=this.context.router.history.replace;this.updatePhotoFullInfoRemoteData(new K.b);var c=da(k.a)({photoId:r}).pipe(Object(f.a)(function(e){return Object(h.a)(new K.a(e))}),Object(b.a)(this.onRootRouteLeaveSubject),Object(y.a)());c.subscribe(function(e){if(o(x.a.RouteDataUpdated({})),e.type===K.e.Failure)Object(G.d)(e.value)?n({message:"There was a network error. Please check your internet connection."}):(n({message:"There was a server error. Please try again later."}),a.isEmpty()&&Object(M.n)(i)(e.value));else{var t=pa(e);o(x.a.BatchActions({actions:t}))}}),this.requestSubject.next(c)}},{key:"fetchRelatedPhotosThenCacheAndSet",value:function(){var e=this,t=this.props,a=t.match,n=t.updateData,o=t.relatedPhotoIdsRemoteData,r=a.params.id,i=function(){switch(o.type){case K.e.Reloading:case K.e.Success:return new K.d(o.value);case K.e.Failure:case K.e.Loading:case K.e.NotAsked:return new K.b}}();this.updateRelatedPhotoIdsRemoteData(i);var c=k.a.photos.getRelatedPhotos({photoId:r}).pipe(Object(g.a)(function(e){return{normalizedResponse:fa(e),remoteData:new K.f(e.results.map(function(e){return e.id}))}}),Object(f.a)(function(e){return Object(h.a)({normalizedResponse:void 0,remoteData:new K.a(e)})}),Object(b.a)(this.onRootRouteLeaveSubject),Object(y.a)());c.subscribe(function(t){var a=t.normalizedResponse,o=t.remoteData;void 0!==a&&n(a.entities),e.updateRelatedPhotoIdsRemoteData(o)}),this.requestSubject.next(c)}},{key:"fetchPhotoStatsThenCacheAndSet",value:function(){var e=this,t=this.props,a=t.match,n=t.updatePhotoStats,o=a.params.id;this.updatePhotoStatsRemoteData(new K.b);var r=k.a.photos.getPhotoStats({photoId:o}).pipe(Object(g.a)(function(e){return{response:e,remoteData:new K.f(e)}}),Object(f.a)(function(e){return Object(h.a)({response:void 0,remoteData:new K.a(e)})}),Object(b.a)(this.onInfoRouteLeaveSubject),Object(y.a)());r.subscribe(function(t){var a=t.response,r=t.remoteData;void 0!==a&&n(o,a),e.updatePhotoStatsRemoteData(r)}),this.requestSubject.next(r)}},{key:"onRequestMainImageToggleZoom",value:function(){this.trackToggleZoomableMainImageZoom(),this.toggleZoomableMainImageZoom()}},{key:"trackToggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,a=e.trackZoomedInPhoto,n=e.trackZoomedOutPhoto,o=e.match.params.id;Object(L.l)({location:t}).zoomableMainImageOptions.isZoomedOut?a(o):n(o)}},{key:"toggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,a=e.pageModalScrollResetRequested,n=this.context.router.history;Object(L.c)(t)&&a(),n.replace(Object(L.o)(function(e){var t=e.zoomableMainImageOptions;return{zoomableMainImageOptions:Object.assign({},t,{isZoomedOut:!t.isZoomedOut})}})(t))}},{key:"onMainImageLoad",value:function(e){var t;this.setState({mainImageCurrentSrc:(t=e.currentTarget,n.a.of(t.currentSrc).filter(A.b).orElseL(function(){return n.a.of(t.src).filter(A.b)}))})}},{key:"renderChildRoute",value:function(){var e=this.props,t=e.match,a=e.location,o=e.maybePhoto,r=e.photoFullInfoRemoteData,i=e.photoStatsRemoteData,c=e.renderType,s=t.params.id,l=Object(L.i)(a),u=Object(L.l)({location:a}),d=n.a.of(u.initialSrc),p=t.params.subRoute,h=!Object(L.e)(a)&&q.a.is.Enhanced(c);switch(p){case F.a.info:return l.filter(function(){return h}).map(function(e){return m.a.createElement(ea,{maybeCachedPhoto:o,photoId:s,modalLocationState:e,maybeMainImageCurrentSrc:d,photoFullInfoRemoteData:r,photoStatsRemoteData:i})}).orUndefined();case F.a.share:return l.filter(function(){return h}).map(function(e){return m.a.createElement(ua,{maybeCachedPhoto:o,photoId:s,modalLocationState:e,maybeMainImageCurrentSrc:d,photoFullInfoRemoteData:r})}).orUndefined();case void 0:return}}},{key:"render",value:function(){var e=this,t=this.props,a=t.maybePhoto,o=t.location,r=t.isLoggedIn,i=t.photoFullInfoRemoteData,c=t.relatedPhotoIdsRemoteData,s=t.renderType,l=Object(L.l)({location:o}),u=l.shouldTruncateDescription,d=q.a.match({Unenhanced:function(){return lt.Unenhanced({zoomable:{isZoomedOut:l.zoomableMainImageOptions.isZoomedOut}})},Enhanced:function(){return lt.Enhanced({zoomable:{isZoomedOut:l.zoomableMainImageOptions.isZoomedOut,onRequestToggleZoom:e.onRequestMainImageToggleZoom}})}})(s),p=n.a.of(l.initialSrc);return m.a.createElement(Tt,{maybeCachedPhoto:a,location:o,photoFullInfoRemoteData:i,maybeMainImageInitialSrc:p,relatedPhotoIdsRemoteData:c,onMainImageLoad:this.onMainImageLoad,mainImageRenderType:d,shouldTruncateDescription:u,onRequestToggleTruncatedDescription:this.onRequestToggleTruncatedDescription,isLoggedIn:r},this.renderChildRoute())}}]),t}();ba.contextTypes={router:l.a.object.isRequired};var ga=Object(B.a)({updateData:x.rb,updatePhotoStats:x.sb,setErrorFlash:x.I,trackZoomedInPhoto:x.lb,trackZoomedOutPhoto:x.mb,showProgressBar:x.P,hideProgressBar:x.s,pageModalScrollResetRequested:x.w,updatePhotoFullInfoRemoteData:x.a.UpdatePhotoFullInfoRemoteData,updateRelatedPhotoIdsRemoteData:x.a.UpdateRelatedPhotoIdsRemoteData,updatePhotoStatsRemoteData:x.a.UpdatePhotoStatsRemoteData}),va=c()(Object(W.b)({routeType:W.a.DynamicRoute}),Object(d.connect)(function(){var e=Object(H.f)(),t=Object(Z.b)(),a=Object(Z.d)(),o=Object(Z.c)();return function(r,i){var c=i.match.params.id;return{maybePhoto:n.a.of(e(r,c)),isLoggedIn:Object(z.g)(r),photoFullInfoRemoteData:t(r,{photoId:c}),relatedPhotoIdsRemoteData:a(r,{photoId:c}),photoStatsRemoteData:o(r,{photoId:c})}}},ga),q.b)(ba);a.d(t,"default",function(){return va}),a.d(t,"PhotoFullInfoRemoteData",function(){}),a.d(t,"RelatedPhotoIdsRemoteData",function(){}),a.d(t,"PhotoStatsRemoteData",function(){})}}]);
//# sourceMappingURL=photos-route.main.2cee1.js.map